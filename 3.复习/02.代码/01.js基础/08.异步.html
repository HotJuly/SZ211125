<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <script>
    /*
      什么是异步?
        得到了一个任务,但是延迟执行

      并不是所有的回调函数,都会被异步执行
        数组相关的方法都是同步回调函数
        Promise的执行器函数也会同步执行

        浏览器中异步任务分为两种,分别是宏任务和微任务两种任务
          这两种任务分别具有自己的队列,宏任务队列和微任务队列

        执行优先级:
          如果将script标签视为第一宏任务,那么宏任务优先于微任务执行
          如果不将script标签视为宏任务,那么微任务优先于宏任务执行

        执行流程:主线程代码执行->清空微任务队列->执行一个宏任务(重复2和3流程)

        注意点:
          1.setTimeout会开启宏任务,.then会开启微任务
          2.微任务会夹杂在每两个宏任务之间执行
          3.ES6新增微任务的目的,就是方便用户修改页面,减少页面的更新次数

        扩展:
          Vue更新视图的操作是在微任务中执行的


        队列结构:
          数据类型:数组
          先进先出,后进后出

        栈结构:
          数据类型:数组
          先进后出,后进先出


    
    
    */

    // [1, 2, 3].forEach(item => {
    //   console.log(item)
    // })
    // console.log('forEach()之后')

    // new Promise((resolve, reject) => { // excutor  执行器函数
    //   console.log('执行excutor')
    // })
    // console.log('new Promise()之后')

    // setTimeout(() => {
    //   console.log('执行timout回调')
    // }, 0);
    // console.log('setTimeout()之后')

    // Promise.resolve(1).then(() => {
    //   console.log('promise成功的回调')
    // })
    // Promise.resolve(1).then(() => {
    //   console.log('promise成功的回调')
    // })
    // console.log('.then之后')


    
    setTimeout(() => {
      console.log('1')

      Promise.resolve(1).then(() => {
        console.log('5')
      })

    }, 0);

    
    setTimeout(() => {
      console.log('2')
    }, 0);

    Promise.resolve(1).then(() => {
      console.log('3')
    })
    
    Promise.resolve(1).then(() => {
      console.log('4')
    })

  </script>
</body>
</html>