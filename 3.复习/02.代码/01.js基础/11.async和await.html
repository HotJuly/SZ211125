<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        /*
            async和await
                以同步代码的格式,书写异步的代码

            async和await其实是Promise + then的语法放
        
            语法:
                1.async使用方法
                    async关键字写在函数声明之前即可
                    例如:
                        async function a(){}
                        async ()=>{}
                        class中:
                        async say(){}

                2.await使用方法
                    await右侧可以书写Promise对象,但不一定必须是promise对象
                    await表达式的返回值,就是右侧promise对象的result值
                        扩展:平常使用的axios,也是返回一个promise对象,并且会将请求得到的响应体数据作为该promise的reuslt值
                    await会阻塞后续代码的执行(仅限于当前的async函数之内)
                        await右侧的代码会立即执行,他只会拦截之后代码的运行
            返回值:全新的promise对象(p4)
                变为成功
                    1.如果async函数的return值是基础数据类型,p4的状态就会变为成功状态
                        只要async函数中的代码成功执行结束,p4的状态就会变为成功状态

                    2.如果async函数返回值为成功的Promise对象,p4的状态就会变为成功状态

                变为失败
                    3.如果async函数中的代码出现报错没有执行结束,p4的状态就会变为失败状态
                    
                    4.如果async函数返回值为失败的Promise对象,p4的状态就会变为失败状态
                    
            注意点:
                1.async可以单独使用.await必须配合async使用
                2.无论await后面是同步成功的promise还是异步成功的,后续代码的执行都是异步的
                3.await后续的代码,其实都会被放入.then的成功回调中
                4.await中如果遇到了失败的promise,后续代码将不会继续执行
                5.async函数无论return任何内容,最终一定都会返回一个全新的promise对象


        */

        async function a(){
            console.log(1)
            var result = await 100
            // throw new Error();
            console.log(2,result)
            // console.log(result)

            // return Promise.reject();
        }

        console.log(3)
        var b= a()
        console.log(4,b)

        // function a(){
        //     console.log(1)
        //     return new Promise((resolve,reject)=>{
        //         console.log(5)
        //         // setTimeout(resolve,1000,6)
        //         // resolve('a')
        //         reject();
        //     })
        //     .then((result)=>{
        //         console.log(2)
        //     })
        // }

        // console.log(3)
        // a()
        // console.log(4)
    </script>
</body>
</html>