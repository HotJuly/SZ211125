# Vue生命周期

1. Vue中一共具有多少个生命周期?
   1. 一共11个生命周期,常用8个
   2. 严格来说是12个,后端渲染还有一个专用的serverPrefetch
2. 生命周期划分
   1. 初始化阶段
      1. beforeCreate
         1. **beforeCreate之前,Vue会初始化组件事件和组件的生命周期**
      2. created
         1. 发送请求
            1. 优点:
               1. 由于顺序靠前,所以发送请求的时机更早,所以此处发送请求返回响应的速度更快
                  1. 越早回来看到数据的时间就越早
            2. 缺点:由于JS引擎是单线程解析,所以如果该阶段的事情太多,很可能会阻塞后续代码执行,延长白屏时间
         2. 注意点:禁止在created做大量的逻辑操作
         3. **beforeCreate之后created之前,Vue会初始化组件注入,同时还会做数据劫持**
            1. 注入的意思:就是将methods,computed,data等中的东西,在this身上也添加一份属性名(简单理解就是数据代理)
      3. beforeMount
         1. **created之后beforeMount之前,Vue会将template字符串编译成render函数**
            1. **扩展:**
               1. **render函数是用来生成当前组件的虚拟DOM的**
               2. **渲染优先级:render函数>template配置属性>index.html中的模版**
               3. **beforeMount之前,只会准备好render函数,不会调用render,来生成虚拟DOM**
               4. **this.$vnode存储的是父组件的虚拟DOM,this._vnode存储的是自身的虚拟DOM**
      4. mounted
         1. 发送请求
            1. 优点:由于该阶段页面已经挂载结束,此处做事情不会影响到页面的渲染
            2. 缺点:由于顺序靠后,所以发送请求时机较晚,所以此处发送请求返回响应的速度较慢
         2. 开启定时器
         3. 绑定自定义事件,或者订阅消息
         4. 操作真实DOM
            1. Swiper
            2. 滑动库
         5. **beforeMount之后mounted之前,Vue会调用render函数生成虚拟DOM,再通过虚拟DOM生成真实DOM,最终将生成的真实DOM替换掉页面上的指定区域(el)**
   2. 更新阶段
      1. beforeUpdate
         1. 数据已经变为最新数据,页面展示的还是旧的内容
      2. updated
         1. 数据已经变为最新数据,页面展示的就是新的内容
         2. 二次操作真实DOM
   3. 卸载阶段
      1. beforeDestroy
         1. 清除定时器
         2. 解绑事件
            1. 使用@符号绑定的原生DOM事件,是否需要手动解绑?
               1. 不需要,因为该事件的绑定经过了Vue的解析
            2. 使用onclick语法或者addEventListener语法绑定的原生DOM事件,是否需要手动解绑?
               1. 需要,因为Vue不知道你绑定了哪些原生DOM事件
            3. 使用$on语法或者@符号给某个组件绑定的自定义事件,是否需要手动解绑?
               1. 不需要,因为使用到了Vue的语法,他会知道当前组件绑定了哪些自定义事件,会自动解绑
            4. 给全局事件总线对象绑定自定义事件,是否需要手动解绑?
               1. 需要,由于全局事件总线对象不会卸载,所以他身上绑定的自定义事件永远都会存在,所以当某个组件卸载的时候,一定要把自己绑定给事件总线的事件卸载
      2. destroyed
   4. keep-alive专用
      1. activated(激活)
      2. deactivated(失活)
   5. 专门用于捕获报错
      1. errorCaptured 
      2. 注意:该生命周期只能捕获后代组件出现的报错,无法捕获自身的报错
      3. 所以开发更多选择使用Vue.config.errorHandler方法监视项目报错
   6. 服务端渲染专用
      1. serverPrefetch