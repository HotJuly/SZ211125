# 组件懒加载

1. 前言:
   1. 一个Vue项目以生产环境打包,最终得到的dist文件夹中,具有几个文件?
      1. index.html
      2. index.js
      3. 注意:
         1. 如果图片体积较小,会被编译成base64格式的字符串,直接存放在js代码中
         2. 如果图片体积较大,就会被单独输出到image文件夹中
         3. 也就是说,项目中绝大多数的代码,都在index.js文件中
      4. 例如:现在项目中具有10个组件,每个组件的文件大小1MB,
         1. 由于index.js具有所有组件的代码,所以当前index.js大小应该为10MB
         2. 出现的问题:用户目前只看首页,但是请求回来的index.js中具有所有组件的代码,结果**导致项目体积变大,占用带宽变多,解析代码时间变长,页面加载速度较慢,白屏时间变长**
2. ES6模块化语法
   1. import ... from '文件路径'
      1. 称为静态导入
      2. 该语法在编译项目的时候,会将被引入的依赖文件的代码复制到引入依赖的这个文件中,覆盖import...from'文件路径'语法
      3. 也就是说该语法上线之后不存在,所以才会导致所有文件变成一个index.js文件的原因
   2. import('文件路径')
      1. 称为动态导入
      2. 该语法在编译项目的时候,如果发现该语法,webpack会将被引入的文件单独切割成为一个js文件,单独存放,方便后续引入
      3. 也就是说该语法上线之后依旧存在
      4. 例如:现在项目中具有10个组件,每个组件的文件大小1MB,
         1. 用该语法引入其余的9个文件,最终dist文件夹中会存有1+1+9=11个文件
            1. index.html
            2. index.js
            3. 其余9个组件的js文件
3. 组件懒加载的优点
   1. 经过组件懒加载处理之后,index.js中只会存有首页代码,其余代码都会被单独切割为多个js文件存放
   2. 如果用户第一次进入当前项目,请求index.js文件,**体积变小,占用带宽变小,解析代码时间缩短,最终导致页面首屏渲染速度变快,白屏时间变短**
4. 组件懒加载的缺点
   1. 由于经过组件懒加载之后,index.js中只存有首页的代码,也就是说,用户观看其余组件的时候,需要再次发送请求,获取服务器上对应的组件代码
   2. 最终导致需要发送更多的请求,每个页面想要展示的时候,都需要等待请求的时间,导致**后续页面渲染速度变慢**
5. 组件预加载
   1. 组件预加载,就是趁用户不注意,偷偷的将未来可能需要使用的资源加载回来
   2. 优点:可以解决组件懒加载需要等待请求时间的缺点,提前将组件的代码请求回来,当用户切换页面的时候,可以直接使用已请求回来的代码,**提高后续页面的渲染速度**
   3. 缺点:相对来说比较浪费流量