# 小程序数据绑定

## 1.C(Create 创建)

1. Vue

   1. 在组件的配置对象中,添加data属性,属性值为函数,该函数会返回一个全新的data对象

   2. **面试题:为什么Vue的data必须是函数形式?**

      1. ```javascript
         <template>
           <A/>
           <A/>
           <A/>
          </template>
         <script>
           import A from '../A.vue';
           export default {
             components:{
               A
             }
         }
          </script>
         ```

         **导致的结果:如果使用对象形式,很有可能会导致多个组件实例对象共享一个状态数据data对象,如果其中任何一个组件实例修改了该data对象的数据,那么其余的组件都会显示相同结果(类似于Vuex效果)**

         **Vue官网标准:data一般用于存储当前组件独享的数据,如果是共享数据应该存放于Vuex中**

2. React

   1. 在class中,书写state属性,属性值为一个对象即可

3. 小程序

   1. 在配置对象中,添加data属性,属性值为一个对象即可
   2. **面试题:为什么小程序可以写成对象形式?**
      1. **小程序会对data对象进行JSON化处理**

## 2.R(Read 读取)

1. 在模版中使用
   1. Vue
      1. 在template中可以书写插值语法({{msg}}),其中填写状态数据名称即可
      2. 问题:什么时候需要加上插值语法,什么时候不需要?
         1. 如果渲染的是文本,就需要加上插值语法
         2. 如果是在指令中使用,就不需要加上插值语法
   2. React
      1. 在render函数的结构中,可以书写大括号({this.state.msg}),其中书写js代码即可
   3. 小程序
      1. **在wxml中,可以书写插值语法({{msg}}),其中填写状态数据名称即可**
      2. **只要想在wxml中使用状态数据,就一定要加插值语法**
2. 在js代码中使用
   1. Vue
      1. 语法:this.msg
      2. 流程:
         1. this.msg读取数据,会触发数据代理
         2. 由于数据代理触发,会找到this.$data.msg获取数据
         3. this.$data.msg触发数据劫持,返回数据
   2. React
      1. 语法:this.state.msg
      2. React中没有数据代理的存在,所以必须要自己主动读取state中的数据
   3. 小程序
      1. **语法:this.data.msg**
      2. **小程序中没有数据代理的存在,所以必须要自己主动读取data中的数据**

## **3**.U(Update 更新)

1. Vue
   1. 语法:this.msg=123
   2. 流程:
      1. this.msg=123,触发数据代理
      2. 由于数据代理触发,代码会变为this.$data.msg=123
      3. this.$data.msg=123,触发数据劫持
      4. 由于数据劫持触发,msg闭包缓存的数据会发生变化(简单理解:msg的值会发生变化)
      5. 触发dep.notify方法,实现视图更新
   3. **面试题:请问Vue更新状态数据是同步更新还是异步更新?**
      1. **同步更新**
   4. **面试题2:请问Vue更新视图是同步更新还是异步更新?**
      1. **异步更新(通过编辑模式切换可以证明)**
2. React(持久化状态框架)
   1. 语法:this.setState({msg:123})
   2. **面试题:请问React更新状态数据是同步更新还是异步更新?**
      1. 有时候是同步更新,有时候是异步更新
      2. 同步更新
         1. 定时器
         2. 原生事件
      3. 异步更新
         1. 生命周期
         2. 合成事件
            1. 合成事件在绑定的时候,用的是驼峰命名法
      4. 注意:在React18中,无论是原生事件还是合成事件,都是异步更新
3. 小程序
   1. **语法:this.setData({msg:123})**
   2. **小程序没有数据劫持**
   3. **面试题:请问小程序更新状态数据是同步更新还是异步更新?**
      1. **同步更新**
   4. **面试题2:请问小程序更新视图是同步更新还是异步更新?**
      1. **异步更新**
   5. **小总结:数据是同步更新,也就说明,任何时候使用this.data获取数据一定都是最新数据**

## 4.D(Delete 删除)

​	由于React和小程序没有响应式效果,所以不需要考虑删除

​	Vue具有响应式的特点,所以在删除状态数据的时候,可以使用Vue.delete或者this.$delete删除

​		问题:delete关键字和Vue.delete的区别

​		回答:使用delete关键字删除数据,不会导致视图更新,而Vue.delete会最后渲染一次页面

